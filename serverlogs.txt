risma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîÑ Running scheduled overdue alert check...
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."createdAt", "public"."workflow_alerts"."updatedAt", "public"."workflow_alerts"."type", "public"."workflow_alerts"."priority"::text, "public"."workflow_alerts"."status"::text, "public"."workflow_alerts"."title", "public"."workflow_alerts"."message", "public"."workflow_alerts"."stepName", "public"."workflow_alerts"."isRead", "public"."workflow_alerts"."readAt", "public"."workflow_alerts"."acknowledged", "public"."workflow_alerts"."acknowledgedAt", "public"."workflow_alerts"."dueDate", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."assigned_to_id", "public"."workflow_alerts"."created_by_id", "public"."workflow_alerts"."metadata", "public"."workflow_alerts"."responsibleRole"::text, "public"."workflow_alerts"."line_item_id", "public"."workflow_alerts"."phase_id", "public"."workflow_alerts"."section_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."status" = CAST($1::text AS "public"."alert_status") AND "public"."workflow_alerts"."dueDate" < $2 AND "public"."workflow_alerts"."priority" <> CAST($3::text AS "public"."alert_priorities")) OFFSET $4
‚úÖ No overdue alerts found
[2025-08-26T13:15:09.359Z] [PID: 13488] [NODE-CRON] [WARN] missed execution at Tue Aug 26 2025 09:15:00 GMT-0400 (Eastern Daylight Time)! Possible blocking IO or high CPU user at the same process used by node-cron.
POST /api/auth/supabase-token-exchange 200 728.537 ms - 585
POST /api/auth/supabase-token-exchange 200 735.814 ms - 585
POST /api/auth/supabase-token-exchange 200 843.771 ms - 585
POST /api/auth/supabase-token-exchange 200 9781.370 ms - 585
POST /api/auth/supabase-token-exchange 200 967.163 ms - 585
POST /api/auth/supabase-token-exchange 200 1102.528 ms - 585
POST /api/auth/supabase-token-exchange 200 233.729 ms - 585
POST /api/auth/supabase-token-exchange 200 293.057 ms - 585
POST /api/auth/supabase-token-exchange 200 139.010 ms - 585
POST /api/auth/supabase-token-exchange 200 112.694 ms - 585
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
POST /api/auth/supabase-token-exchange 200 557.096 ms - 585
POST /api/auth/supabase-token-exchange 200 576.238 ms - 585
POST /api/auth/supabase-token-exchange 200 477.973 ms - 585
POST /api/auth/supabase-token-exchange 200 152.301 ms - 585
POST /api/auth/supabase-token-exchange 200 198.693 ms - 585
POST /api/auth/supabase-token-exchange 200 104.907 ms - 585
POST /api/auth/supabase-token-exchange 200 100.768 ms - 585
POST /api/auth/supabase-token-exchange 200 125.554 ms - 585
POST /api/auth/supabase-token-exchange 200 475.118 ms - 585
POST /api/auth/supabase-token-exchange 200 487.438 ms - 585
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîÑ Running scheduled overdue alert check...
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."createdAt", "public"."workflow_alerts"."updatedAt", "public"."workflow_alerts"."type", "public"."workflow_alerts"."priority"::text, "public"."workflow_alerts"."status"::text, "public"."workflow_alerts"."title", "public"."workflow_alerts"."message", "public"."workflow_alerts"."stepName", "public"."workflow_alerts"."isRead", "public"."workflow_alerts"."readAt", "public"."workflow_alerts"."acknowledged", "public"."workflow_alerts"."acknowledgedAt", "public"."workflow_alerts"."dueDate", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."assigned_to_id", "public"."workflow_alerts"."created_by_id", "public"."workflow_alerts"."metadata", "public"."workflow_alerts"."responsibleRole"::text, "public"."workflow_alerts"."line_item_id", "public"."workflow_alerts"."phase_id", "public"."workflow_alerts"."section_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."status" = CAST($1::text AS "public"."alert_status") AND "public"."workflow_alerts"."dueDate" < $2 AND "public"."workflow_alerts"."priority" <> CAST($3::text AS "public"."alert_priorities")) OFFSET $4
‚úÖ No overdue alerts found
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts

üîÑ Gracefully shutting down...
‚úÖ Disconnected from PostgreSQL database
PS C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\server> ^C
PS C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\server> ^C
PS C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\server> ^C
PS C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\server> npm start

> kenstruction-server@0.1.0 start
> node server.js

üöÄ Starting Kenstruction server...
üìÖ Startup time: 2025-08-26T13:48:33.989Z
üß™ Loaded environment from: C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\server\.env, C:\Users\Jimbo\Desktop\new-roof\roofing-project-2\.env
‚úÖ Required modules loaded successfully
üü° Redis not configured - using in-memory cache fallback
üîç OpenAI Initialization: Checking for API key...
üîç API Key present: true
üîç API Key length: 164
üîç API Key first 20 chars: sk-proj-0FpUNM3i-zgS...
üîç API Key last 4 chars: ...wk0A
üîç OpenAI: Loading OpenAI package...
üîç OpenAI: Creating v4 client...
‚úÖ OpenAI service initialized successfully with model: gpt-5
‚úÖ Bubbles: OpenAIService loaded
‚úÖ Bubbles: BubblesInsightsService loaded
‚úÖ Bubbles: WorkflowActionService loaded
‚úÖ SERVER: Bubbles routes loaded successfully
üîß SERVER: Loading workflow routes...
üîß WORKFLOW ROUTES: Loading workflow routes module
‚úÖ SERVER: Workflow routes loaded successfully
üîß PHASE OVERRIDE ROUTES: Loading phase override routes module
üöÄ ONBOARDING: Loading onboarding routes module
üîß SERVER: Loading workflow import routes...
‚úÖ SERVER: Workflow import routes loaded successfully
üîß SERVER: Loading project import routes...
‚úÖ SERVER: Project import routes loaded successfully
‚úÖ SERVER: Workflow routes registered at /api/workflows
‚úÖ SERVER: Bubbles routes registered at /api/bubbles
‚úÖ SERVER: Workflow import routes registered at /api/workflow-import
‚úÖ SERVER: Project import routes registered at /api/project-import
üìÖ Starting overdue alert scheduler (checking every 30 minutes)
üîß Debug: PORT from env = 5000, final PORT = 5000
üîß Debug: NODE_ENV = development
üîß Debug: DATABASE_URL present = true
üîß Debug: JWT_SECRET present = true
(node:19804) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
üöÄ Kenstruction server running on port 5000
üåç Environment: development
üîó API Base URL: http://0.0.0.0:5000/api
üì° Socket.IO server ready for real-time connections
‚úÖ Server startup completed successfully
prisma:info Starting a postgresql pool with 5 connections.
‚úÖ Connected to PostgreSQL database successfully
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."createdAt", "public"."workflow_alerts"."updatedAt", "public"."workflow_alerts"."type", "public"."workflow_alerts"."priority"::text, "public"."workflow_alerts"."status"::text, "public"."workflow_alerts"."title", "public"."workflow_alerts"."message", "public"."workflow_alerts"."stepName", "public"."workflow_alerts"."isRead", "public"."workflow_alerts"."readAt", "public"."workflow_alerts"."acknowledged", "public"."workflow_alerts"."acknowledgedAt", "public"."workflow_alerts"."dueDate", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."assigned_to_id", "public"."workflow_alerts"."created_by_id", "public"."workflow_alerts"."metadata", "public"."workflow_alerts"."responsibleRole"::text, "public"."workflow_alerts"."line_item_id", "public"."workflow_alerts"."phase_id", "public"."workflow_alerts"."section_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."status" = CAST($1::text AS "public"."alert_status") AND "public"."workflow_alerts"."dueDate" < $2 AND "public"."workflow_alerts"."priority" <> CAST($3::text AS "public"."alert_priorities")) OFFSET $4
‚úÖ No overdue alerts found
prisma:query SELECT COUNT(*) AS "_count._all" FROM (SELECT "public"."users"."id" FROM "public"."users" WHERE 1=1 OFFSET $1) AS "sub"
üìä Database ready - Found 46 users
‚úÖ Database connection established, initializing services...
üì¶ Initializing Alert Cache Service...
üö® WorkflowAlertService ENABLED - PostgreSQL migration complete
‚è∞ Alert Scheduler ENABLED - PostgreSQL migration complete
üöÄ Alert scheduler started - checking workflow deadlines every 5 minutes
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
prisma:query SELECT 1
prisma:query SELECT "public"."users"."id" FROM "public"."users" WHERE ("public"."users"."isActive" = $1 AND "public"."users"."lastLogin" >= $2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."createdAt", "public"."workflow_alerts"."updatedAt", "public"."workflow_alerts"."type", "public"."workflow_alerts"."priority"::text, "public"."workflow_alerts"."status"::text, "public"."workflow_alerts"."title", "public"."workflow_alerts"."message", "public"."workflow_alerts"."stepName", "public"."workflow_alerts"."isRead", "public"."workflow_alerts"."readAt", "public"."workflow_alerts"."acknowledged", "public"."workflow_alerts"."acknowledgedAt", "public"."workflow_alerts"."dueDate", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."assigned_to_id", "public"."workflow_alerts"."created_by_id", "public"."workflow_alerts"."metadata", "public"."workflow_alerts"."responsibleRole"::text, "public"."workflow_alerts"."line_item_id", "public"."workflow_alerts"."phase_id", "public"."workflow_alerts"."section_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."assigned_to_id" = $1 AND "public"."workflow_alerts"."status" = CAST($2::text AS "public"."alert_status")) ORDER BY "public"."workflow_alerts"."priority" DESC LIMIT $3 OFFSET $4
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."createdAt", "public"."workflow_alerts"."updatedAt", "public"."workflow_alerts"."type", "public"."workflow_alerts"."priority"::text, "public"."workflow_alerts"."status"::text, "public"."workflow_alerts"."title", "public"."workflow_alerts"."message", "public"."workflow_alerts"."stepName", "public"."workflow_alerts"."isRead", "public"."workflow_alerts"."readAt", "public"."workflow_alerts"."acknowledged", "public"."workflow_alerts"."acknowledgedAt", "public"."workflow_alerts"."dueDate", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."assigned_to_id", "public"."workflow_alerts"."created_by_id", "public"."workflow_alerts"."metadata", "public"."workflow_alerts"."responsibleRole"::text, "public"."workflow_alerts"."line_item_id", "public"."workflow_alerts"."phase_id", "public"."workflow_alerts"."section_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."assigned_to_id" = $1 AND "public"."workflow_alerts"."status" = CAST($2::text AS "public"."alert_status")) ORDER BY "public"."workflow_alerts"."priority" DESC LIMIT $3 OFFSET $4
üî• Warmed up alert cache for 2 active users
‚úÖ Alert cache warmed up
üöÄ Generating alerts for 15 active projects
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
üîç Checking workflow alerts...
üìä Using modernized alert generation via AlertGenerationService
üöÄ Generating alerts for 15 active projects
prisma:query SELECT 1
prisma:query 
        SELECT
          pwt.project_id,
          pwt.id as tracker_id,
          wli.id as line_item_id,
          wli."itemName" as item_name,
          wli."responsibleRole" as responsible_role,
          wli."alertDays" as alert_days,
          wli."estimatedMinutes" as estimated_minutes,
          ws.id as section_id,
          ws."displayName" as section_name,
          wp.id as phase_id,
          wp."phaseType" as phase_type,
          wp."phaseName" as phase_name,
          p."projectNumber" as project_number,
          p."projectName" as project_name,
          p."project_manager_id" as project_manager_id,
          c."primaryName" as customer_name,
          c.address as customer_address
        FROM project_workflow_trackers pwt
        INNER JOIN workflow_line_items wli ON wli.id = pwt.current_line_item_id
        INNER JOIN workflow_sections ws ON ws.id = wli.section_id
        INNER JOIN workflow_phases wp ON ws.phase_id = wp.id
        INNER JOIN projects p ON p.id = pwt.project_id
        LEFT JOIN customers c ON c.id = p.customer_id
        WHERE pwt.project_id = ANY($1::text[])
          AND wli."isActive" = true
          AND p.status IN ('PENDING','IN_PROGRESS')
          AND pwt.current_line_item_id IS NOT NULL

prisma:query SELECT "public"."role_assignments"."id", "public"."role_assignments"."createdAt", "public"."role_assignments"."updatedAt", "public"."role_assignments"."role_type"::text, "public"."role_assignments"."user_id", "public"."role_assignments"."assigned_at", "public"."role_assignments"."assigned_by_id", "public"."role_assignments"."isActive" FROM "public"."role_assignments" WHERE ("public"."role_assignments"."role_type" IN (CAST($1::text AS "public"."role_types"),CAST($2::text AS "public"."role_types")) AND "public"."role_assignments"."isActive" = $3) OFFSET $4
prisma:query SELECT "public"."users"."id", "public"."users"."firstName", "public"."users"."lastName", "public"."users"."email" FROM "public"."users" WHERE "public"."users"."id" IN ($1,$2) OFFSET $3
prisma:query SELECT "public"."workflow_alerts"."id", "public"."workflow_alerts"."project_id", "public"."workflow_alerts"."line_item_id" FROM "public"."workflow_alerts" WHERE ("public"."workflow_alerts"."project_id" IN ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11,$12,$13,$14,$15) AND "public"."workflow_alerts"."status" = CAST($16::text AS "public"."alert_status")) OFFSET $17
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90076
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90073     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90072     
‚ö†Ô∏è Skipping duplicate alert for call customer on project 90070
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90075
‚ö†Ô∏è Skipping duplicate alert for Add Street View photos from Google Maps. on project 900774
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90067     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90064     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90065     
‚ö†Ô∏è Skipping duplicate alert for Confirm name is spelled correctly. on project 90066     
‚ö†Ô∏è Skipping duplicate alert for Validate customer's email and send confirmation. on projject 90059
‚ö†Ô∏è Skipping duplicate alert for Record property details. on project 90078
No new alerts to create
‚úÖ Generated 0 new alerts
