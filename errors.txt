Dec 06 15:45:45  
Dec 06 15:45:45  > kenstruction-server@0.1.0 start
Dec 06 15:45:45  > node server.js
Dec 06 15:45:45  
Dec 06 15:45:46  üöÄ Starting Kenstruction server...
Dec 06 15:45:46  üìÖ Startup time: 2025-12-06T15:45:46.083Z
Dec 06 15:45:46  üîí Using platform environment variables
Dec 06 15:45:46  ‚úÖ DATABASE_URL configured from environment
Dec 06 15:45:46  üîç DATABASE_URL: postgresql://***:***@bubbles-data-do-user-23063858-0.l.db.ondigitalocean.com:25060/defaultdb?sslmode=require
Dec 06 15:45:46  ‚úÖ Required modules loaded successfully
Dec 06 15:45:46  ‚úÖ Uploads directory exists: /app/uploads
Dec 06 15:45:46  ‚úÖ Company-assets directory exists: /app/uploads/company-assets
Dec 06 15:45:46  ‚úÖ Documents directory exists: /app/uploads/documents
Dec 06 15:45:46  ‚úÖ Uploads directory is writable
Dec 06 15:45:49  ‚úÖ Resend Email Service initialized
Dec 06 15:45:49  üü° Redis not configured - using in-memory cache fallback
Dec 06 15:45:50  ‚úÖ Bubbles: EmbeddingService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: IngestionService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: AssetLookup loaded
Dec 06 15:45:50  ‚úÖ Bubbles: EnhancedDocumentDetection loaded
Dec 06 15:45:50  ‚úÖ Bubbles: EmailService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: BubblesContextService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: ProactiveNotificationsService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: CrossProjectAnalyticsService loaded
Dec 06 15:45:50  üîç OpenAI Initialization: Checking for API key...
Dec 06 15:45:50  üîç API Key present: true
Dec 06 15:45:50  üîç API Key length: 164
Dec 06 15:45:50  üîç API Key first 20 chars: sk-proj-0FpUNM3i-zgS...
Dec 06 15:45:50  üîç API Key last 4 chars: ...wk0A
Dec 06 15:45:50  üîç OpenAI: Loading OpenAI package...
Dec 06 15:45:50  üîç OpenAI: Creating v4 client...
Dec 06 15:45:50  ‚úÖ OpenAI service initialized successfully with model: gpt-4o
Dec 06 15:45:50  ‚úÖ Bubbles: OpenAIService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: BubblesInsightsService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: WorkflowActionService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: BubblesInsightsService loaded
Dec 06 15:45:50  ‚úÖ Bubbles: WorkflowActionService loaded
Dec 06 15:45:50  üîç BUBBLES: Registering /chat route
Dec 06 15:45:50  üîç BUBBLES: Registering POST /chat route handler
Dec 06 15:45:50  ‚úÖ SERVER: Bubbles routes loaded successfully
Dec 06 15:45:51  üìù FORM_SUBMISSIONS: Loading form submissions routes
Dec 06 15:45:51  üîß SERVER: Loading workflow routes...
Dec 06 15:45:51  üîß WORKFLOW ROUTES: Loading workflow routes module
Dec 06 15:45:51  ‚úÖ SERVER: Workflow routes loaded successfully
Dec 06 15:45:51  üîß PHASE OVERRIDE ROUTES: Loading phase override routes module
Dec 06 15:45:51  üöÄ ONBOARDING: Loading onboarding routes module
Dec 06 15:45:51  üîß SERVER: Loading workflow import routes...
Dec 06 15:45:51  ‚úÖ SERVER: Workflow import routes loaded successfully
Dec 06 15:45:51  üîß SERVER: Loading project import routes...
Dec 06 15:45:51  ‚úÖ SERVER: Project import routes loaded successfully
Dec 06 15:45:51  üìÅ Uploads directory: /app/uploads
Dec 06 15:45:51  üìÅ Uploads exists: true
Dec 06 15:45:51  ‚úÖ SERVER: Workflow routes registered at /api/workflows
Dec 06 15:45:51  ‚úÖ SERVER: Bubbles routes registered at /api/bubbles
Dec 06 15:45:51  üîç SERVER: Bubbles router stack: MIDDLEWARE: /^\/?(?=\/|$)/i, GET /test, POST /complete-action, POST /chat, GET /history, POST /reset, GET /status, GET /insights/project/:projectId, GET /insights/portfolio, GET /insights/prediction/:projectId, GET /insights/risks/:projectId, GET /insights/optimization/:projectId, GET /project/:projectId/current-step
Dec 06 15:45:51  ‚úÖ SERVER: Bubbles Context routes registered at /api/bubbles/context
Dec 06 15:45:51  ‚úÖ SERVER: Workflow import routes registered at /api/workflow-import
Dec 06 15:45:51  ‚úÖ SERVER: Project import routes registered at /api/project-import
Dec 06 15:45:51  ‚úÖ TranscriptAIService: OpenAI initialized successfully
Dec 06 15:45:51  üîç FEEDBACK ROUTE DEBUG:
Dec 06 15:45:51  üîç DATABASE_URL present: true
Dec 06 15:45:51  üîç DATABASE_URL: postgresql://***:***@bubbles-data-do-user-23063858-0.l.db.ondigitalocean.com:25060/defaultdb?sslmode=require
Dec 06 15:45:51  ‚úÖ SERVER: Form submissions routes registered at /api/form-submissions
Dec 06 15:45:51  ‚úÖ SERVER: Bubbles routes also registered at /bubbles (backward compatibility)
Dec 06 15:45:51  üèóÔ∏è Server directory: /app
Dec 06 15:45:51  üèóÔ∏è Build path candidates: [ '/app/public', '/build', '/app/build' ]
Dec 06 15:45:51  üèóÔ∏è Selected build path: /app/public
Dec 06 15:45:51  üèóÔ∏è Build exists? true
Dec 06 15:45:51  üìÅ Files in /app: [
Dec 06 15:45:51    '5year-warranty-test.pdf',
Dec 06 15:45:51    'COMPANY_DOCS_MIGRATION_README.md',
Dec 06 15:45:51    'README-BUBBLES.md',
Dec 06 15:45:51    '__tests__',
Dec 06 15:45:51    'add-new-templates.js',
Dec 06 15:45:51    'check-db.js',
Dec 06 15:45:51    'clean-duplicate-alerts.js',
Dec 06 15:45:51    'config',
Dec 06 15:45:51    'coordinate-grid.pdf',
Dec 06 15:45:51    'create-feedback-table.js',
Dec 06 15:45:51    'create-feedback-tables-working.js',
Dec 06 15:45:51    'create-tables-direct.sql',
Dec 06 15:45:51    'create-tables-simple.js',
Dec 06 15:45:51    'data',
Dec 06 15:45:51    'diagnose-db.js',
Dec 06 15:45:51    'exports',
Dec 06 15:45:51    'field-position-test.pdf',
Dec 06 15:45:51    'fix-feedback-tables.js',
Dec 06 15:45:51    'fix-missing-prisma-imports.js',
Dec 06 15:45:51    'fix-prisma-connections.js',
Dec 06 15:45:51    'fix-production-db.js',
Dec 06 15:45:51    'fix_workflow_progress.js',
Dec 06 15:45:51    'jest-results.json',
Dec 06 15:45:51    'jest.config.js',
Dec 06 15:45:51    'jobs',
Dec 06 15:45:51    'middleware',
Dec 06 15:45:51    'migrate_project_workflow_tracker.js',
Dec 06 15:45:51    'node_modules',
Dec 06 15:45:51    'package-lock.json',
Dec 06 15:45:51    'package.json',
Dec 06 15:45:51    'prisma',
Dec 06 15:45:51    'public',
Dec 06 15:45:51    'routes',
Dec 06 15:45:51    'run-on-production.js',
Dec 06 15:45:51    'scripts',
Dec 06 15:45:51    'server.js',
Dec 06 15:45:51    'services',
Dec 06 15:45:51    'test-feedback-api.js',
Dec 06 15:45:51    'test-feedback-query.js',
Dec 06 15:45:51    'test-feedback-route.js',
Dec 06 15:45:51    'test-feedback-simple.js',
Dec 06 15:45:51    'test-production.js',
Dec 06 15:45:51    'test-route.js',
Dec 06 15:45:51    'uploads',
Dec 06 15:45:51    'utils'
Dec 06 15:45:51  ]
Dec 06 15:45:51  üìÖ Starting overdue alert scheduler (checking every 30 minutes)
Dec 06 15:45:51  ‚ö†Ô∏è Database not connected, skipping overdue alert check
Dec 06 15:45:51  üîß Debug: PORT from env = 8080, final PORT = 8080
Dec 06 15:45:51  üîß Debug: NODE_ENV = production
Dec 06 15:45:51  üîß Debug: DATABASE_URL present = true
Dec 06 15:45:51  üîß Debug: JWT_SECRET present = true
Dec 06 15:45:51  üöÄ Kenstruction server running on port 8080
Dec 06 15:45:51  üåç Environment: production
Dec 06 15:45:51  üîó API Base URL: http://0.0.0.0:8080/api
Dec 06 15:45:51  üì° Socket.IO server ready for real-time connections
Dec 06 15:45:51  ‚úÖ Server startup completed successfully
Dec 06 15:45:54  ‚úÖ Connected to PostgreSQL database successfully
Dec 06 15:45:54  üìä Database ready - Found 33 users
Dec 06 15:45:54  ‚úÖ Database connection established, initializing services...
Dec 06 15:45:54  üîß Ensuring lead_sources schema and projects.lead_source_id column exist...
Dec 06 15:45:54  ‚úÖ Lead sources schema ensured
Dec 06 15:45:54  üß± Lead sources schema ensured (startup)
Dec 06 15:45:54  ‚ÑπÔ∏è Embeddings table uses text storage - skipping vector index creation
Dec 06 15:45:54  üßÆ pgvector schema ready
Dec 06 15:45:56  üì¶ Initializing Alert Cache Service...
Dec 06 15:45:56  üö® WorkflowAlertService ENABLED - PostgreSQL migration complete
Dec 06 15:45:56  ‚è∞ Alert Scheduler ENABLED - PostgreSQL migration complete
Dec 06 15:45:56  üöÄ Alert scheduler started - checking workflow deadlines every 5 minutes
Dec 06 15:45:56  üîç Checking workflow alerts...
Dec 06 15:45:56  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:45:56  üöÄ Generating alerts for 1 active projects
Dec 06 15:45:56  üî• Warmed up alert cache for 1 active users
Dec 06 15:45:56  ‚úÖ Alert cache warmed up
Dec 06 15:45:56  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:45:56  No new alerts to create
Dec 06 15:45:56  ‚úÖ Generated 0 new alerts
Dec 06 15:45:56  Follow-up scheduler started - running every hour
Dec 06 15:45:56  ‚è∞ Follow-up scheduler started
Dec 06 15:45:59  10.244.9.47 - - [06/Dec/2025:15:45:59 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:09  10.244.9.47 - - [06/Dec/2025:15:46:09 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:19  10.244.9.47 - - [06/Dec/2025:15:46:19 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:29  10.244.9.47 - - [06/Dec/2025:15:46:29 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:39  10.244.9.47 - - [06/Dec/2025:15:46:39 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:49  10.244.9.47 - - [06/Dec/2025:15:46:49 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:46:59  10.244.9.47 - - [06/Dec/2025:15:46:59 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:47:09  10.244.9.47 - - [06/Dec/2025:15:47:09 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:47:19  10.244.9.47 - - [06/Dec/2025:15:47:19 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:47:29  10.244.9.47 - - [06/Dec/2025:15:47:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:47:39  10.244.9.47 - - [06/Dec/2025:15:47:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:47:49  10.244.9.47 - - [06/Dec/2025:15:47:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:47:59  10.244.9.47 - - [06/Dec/2025:15:47:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:09  10.244.9.47 - - [06/Dec/2025:15:48:09 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:48:19  10.244.9.47 - - [06/Dec/2025:15:48:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:29  10.244.9.47 - - [06/Dec/2025:15:48:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:39  10.244.9.47 - - [06/Dec/2025:15:48:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:49  10.244.9.47 - - [06/Dec/2025:15:48:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:59  10.244.9.47 - - [06/Dec/2025:15:48:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:09  10.244.9.47 - - [06/Dec/2025:15:49:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:19  10.244.9.47 - - [06/Dec/2025:15:49:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:29  10.244.9.47 - - [06/Dec/2025:15:49:29 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:49:39  10.244.9.47 - - [06/Dec/2025:15:49:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:49  10.244.9.47 - - [06/Dec/2025:15:49:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:59  10.244.9.47 - - [06/Dec/2025:15:49:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:50:00  üîç Checking workflow alerts...
Dec 06 15:50:00  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:50:00  üöÄ Generating alerts for 1 active projects
Dec 06 15:50:00  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:50:00  No new alerts to create
Dec 06 15:50:00  ‚úÖ Generated 0 new alerts
Dec 06 15:50:09  10.244.9.47 - - [06/Dec/2025:15:50:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:50:19  10.244.9.47 - - [06/Dec/2025:15:50:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:50:29  10.244.9.47 - - [06/Dec/2025:15:50:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:50:39  10.244.9.47 - - [06/Dec/2025:15:50:39 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:50:49  10.244.9.47 - - [06/Dec/2025:15:50:49 +0000] "GET /api/health HTTP/1.1" 200 375 "-" "kube-probe/1.31"
Dec 06 15:50:59  10.244.9.47 - - [06/Dec/2025:15:50:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:09  10.244.9.47 - - [06/Dec/2025:15:51:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:17  üö® ALERTS ROUTE: Fetching workflow alerts...
Dec 06 15:51:17  üö® ALERTS ROUTE: Found 1 alerts from database
Dec 06 15:51:17  10.244.0.163 - - [06/Dec/2025:15:51:17 +0000] "GET /api/alerts?limit=200 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:17  üîç FEEDBACK DEBUG: About to query feedback table
Dec 06 15:51:17  üîç FEEDBACK DEBUG: where clause: {}
Dec 06 15:51:17  10.244.26.130 - - [06/Dec/2025:15:51:17 +0000] "GET /api/feedback?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:19  10.244.9.47 - - [06/Dec/2025:15:51:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:22  10.244.30.34 - - [06/Dec/2025:15:51:22 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.30.34 - - [06/Dec/2025:15:51:23 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üîç Where clause: { archived: false }
Dec 06 15:51:23  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:51:23  üö® ALERTS ROUTE: Fetching workflow alerts...
Dec 06 15:51:23  üö® ALERTS ROUTE: Found 1 alerts from database
Dec 06 15:51:23  10.244.0.163 - - [06/Dec/2025:15:51:23 +0000] "GET /api/alerts?limit=200 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.30.34 - - [06/Dec/2025:15:51:23 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.3.115 - - [06/Dec/2025:15:51:23 +0000] "GET /api/projects HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.0.163 - - [06/Dec/2025:15:51:23 +0000] "GET /favicon.ico HTTP/1.1" 200 685 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üìÖ CALENDAR: GET /api/calendar-events - Request received
Dec 06 15:51:23  10.244.3.115 - - [06/Dec/2025:15:51:23 +0000] "GET /api/calendar-events?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üîç ACTIVITIES: Fetching 50 recent activities for user cmfld60ef0000bi0d8ky8hlot...
Dec 06 15:51:23  üîç FEEDBACK DEBUG: About to query feedback table
Dec 06 15:51:23  üîç FEEDBACK DEBUG: where clause: {}
Dec 06 15:51:23  10.244.26.130 - - [06/Dec/2025:15:51:23 +0000] "GET /api/activities/recent?limit=50 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.26.130 - - [06/Dec/2025:15:51:23 +0000] "GET /api/feedback?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:51:23  üéØ API: Found position: {
Dec 06 15:51:23    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:51:23    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:51:23    phaseType: 'LEAD',
Dec 06 15:51:23    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:51:23    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:51:23    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:51:23    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:51:23    currentLineItemName: 'Answer phone call',
Dec 06 15:51:23    sectionDisplayName: 'Initial Contact',
Dec 06 15:51:23    phaseName: 'Lead'
Dec 06 15:51:23  }
Dec 06 15:51:23  10.244.3.115 - - [06/Dec/2025:15:51:23 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:29  10.244.9.47 - - [06/Dec/2025:15:51:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:39  10.244.9.47 - - [06/Dec/2025:15:51:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:45  10.244.0.163 - - [06/Dec/2025:15:51:45 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:51:45  10.244.30.34 - - [06/Dec/2025:15:51:45 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:51:49  10.244.9.47 - - [06/Dec/2025:15:51:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:49  10.244.30.34 - - [06/Dec/2025:15:51:49 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:51:59  10.244.9.47 - - [06/Dec/2025:15:51:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:06  10.244.0.163 - - [06/Dec/2025:15:52:06 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:52:09  10.244.9.47 - - [06/Dec/2025:15:52:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:19  10.244.9.47 - - [06/Dec/2025:15:52:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:29  10.244.9.47 - - [06/Dec/2025:15:52:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:31  10.244.0.163 - - [06/Dec/2025:15:52:31 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:52:39  10.244.9.47 - - [06/Dec/2025:15:52:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:49  10.244.9.47 - - [06/Dec/2025:15:52:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:52:59  10.244.9.47 - - [06/Dec/2025:15:52:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:09  [Vapi] ===== INCOMING REQUEST =====
Dec 06 15:53:09  [Vapi] Request body keys: [ 'message' ]
Dec 06 15:53:09  [Vapi] Raw body: {
Dec 06 15:53:09    "message": {
Dec 06 15:53:09      "timestamp": 1765036389400,
Dec 06 15:53:09      "type": "tool-calls",
Dec 06 15:53:09      "toolCalls": [
Dec 06 15:53:09        {
Dec 06 15:53:09          "id": "call_5FyfbXXYWuCT4R4sNZbe97Lo",
Dec 06 15:53:09          "type": "function",
Dec 06 15:53:09          "function": {
Dec 06 15:53:09            "name": "ragAssistantQuery",
Dec 06 15:53:09            "arguments": {
Dec 06 15:53:09              "query": "What is the project number for 1616 Hollywood Road?",
Dec 06 15:53:09              "returnActions": true
Dec 06 15:53:09            }
Dec 06 15:53:09          }
Dec 06 15:53:09        }
Dec 06 15:53:09      ],
Dec 06 15:53:09      "toolCallList": [
Dec 06 15:53:09        {
Dec 06 15:53:09          "id": "call_5FyfbXXYWuCT4R4sNZbe97Lo",
Dec 06 15:53:09          "type": "function",
Dec 06 15:53:09          "function": {
Dec 06 15:53:09            "name": "ragAssistantQuery",
Dec 06 15:53:09            "arguments": {
Dec 06 15:53:09              "query": "What is the project number for 1616 Hollywood Road?",
Dec 06 15:53:09              "returnActions": true
Dec 06 15:53:09            }
Dec 06 15:53:09          }
Dec 06 15:53:09        }
Dec 06 15:53:09      ],
Dec 06 15:53:09      "toolWithToolCallList": [
Dec 06 15:53:09        {
Dec 06 15:53:09          "type": "function",
Dec 06 15:53:09          "function": {
Dec 06 15:53:09            "name": "ragAssistantQuery",
Dec 06 15:53:09            "strict": true,
Dec 06 15:53:09            "parameters": {
Dec 06 15:53:09              "type": "object",
Dec 06 15:53:09              "required": [
Dec 06 15:53:09                "qu
Dec 06 15:53:09  [Vapi] Parsed params: {
Dec 06 15:53:09    projectId: null,
Dec 06 15:53:09    query: '[object Object]',
Dec 06 15:53:09    userId: undefined,
Dec 06 15:53:09    userName: undefined,
Dec 06 15:53:09    hasVars: true,
Dec 06 15:53:09    varKeys: []
Dec 06 15:53:09  }
Dec 06 15:53:09  [Vapi] intent flags { wantsSend: false, docyIntent: false, query: '[object Object]' }
Dec 06 15:53:09  [Vapi] Skipping semanticSearch (no doc keywords) for query: [object Object]
Dec 06 15:53:09  [Vapi] Looking up user with ID: null
Dec 06 15:53:09  [Vapi] No user from request, looking up fallback user...
Dec 06 15:53:09  prisma:error 
Dec 06 15:53:09  Invalid `prisma.user.findFirst()` invocation:
Dec 06 15:53:09  
Dec 06 15:53:09  {
Dec 06 15:53:09    where: {
Dec 06 15:53:09      OR: [
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "ADMIN"
Dec 06 15:53:09        },
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "OWNER"
Dec 06 15:53:09        },
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "PROJECT_MANAGER"
Dec 06 15:53:09        }
Dec 06 15:53:09      ]
Dec 06 15:53:09    },
Dec 06 15:53:09    select: {
Dec 06 15:53:09      id: true,
Dec 06 15:53:09      firstName: true,
Dec 06 15:53:09      lastName: true,
Dec 06 15:53:09      email: true,
Dec 06 15:53:09      role: true
Dec 06 15:53:09    }
Dec 06 15:53:09  }
Dec 06 15:53:09  
Dec 06 15:53:09  Invalid value for argument `role`. Expected UserRole.
Dec 06 15:53:09  ‚ùå VAPI: Error loading context: PrismaClientValidationError: 
Dec 06 15:53:09  Invalid `prisma.user.findFirst()` invocation:
Dec 06 15:53:09  
Dec 06 15:53:09  {
Dec 06 15:53:09    where: {
Dec 06 15:53:09      OR: [
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "ADMIN"
Dec 06 15:53:09        },
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "OWNER"
Dec 06 15:53:09        },
Dec 06 15:53:09        {
Dec 06 15:53:09          role: "PROJECT_MANAGER"
Dec 06 15:53:09        }
Dec 06 15:53:09      ]
Dec 06 15:53:09    },
Dec 06 15:53:09    select: {
Dec 06 15:53:09      id: true,
Dec 06 15:53:09      firstName: true,
Dec 06 15:53:09      lastName: true,
Dec 06 15:53:09      email: true,
Dec 06 15:53:09      role: true
Dec 06 15:53:09    }
Dec 06 15:53:09  }
Dec 06 15:53:09  
Dec 06 15:53:09  Invalid value for argument `role`. Expected UserRole.
Dec 06 15:53:09      at Nn (/app/node_modules/@prisma/client/runtime/library.js:29:1363)
Dec 06 15:53:09      at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6911)
Dec 06 15:53:09      at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)
Dec 06 15:53:09      at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)
Dec 06 15:53:09      at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)
Dec 06 15:53:09      at async /app/routes/vapi.js:1029:16 {
Dec 06 15:53:09    clientVersion: '6.19.0'
Dec 06 15:53:09  }
Dec 06 15:53:09  10.244.9.47 - - [06/Dec/2025:15:53:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:14  10.244.3.115 - - [06/Dec/2025:15:53:14 +0000] "POST /api/vapi/assistant-query HTTP/1.1" 200 254 "-" "axios/1.8.3"
Dec 06 15:53:14  10.244.3.115 - - [06/Dec/2025:15:53:14 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:53:19  10.244.9.47 - - [06/Dec/2025:15:53:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:29  10.244.9.47 - - [06/Dec/2025:15:53:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:39  10.244.9.47 - - [06/Dec/2025:15:53:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:49  10.244.9.47 - - [06/Dec/2025:15:53:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:53:59  10.244.9.47 - - [06/Dec/2025:15:53:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:09  10.244.9.47 - - [06/Dec/2025:15:54:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:19  10.244.9.47 - - [06/Dec/2025:15:54:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:29  10.244.9.47 - - [06/Dec/2025:15:54:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:39  10.244.9.47 - - [06/Dec/2025:15:54:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:49  10.244.9.47 - - [06/Dec/2025:15:54:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:54:59  10.244.9.47 - - [06/Dec/2025:15:54:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:00  üîç Checking workflow alerts...
Dec 06 15:55:00  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:55:00  üöÄ Generating alerts for 1 active projects
Dec 06 15:55:00  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:55:00  No new alerts to create
Dec 06 15:55:00  ‚úÖ Generated 0 new alerts
Dec 06 15:55:09  10.244.9.47 - - [06/Dec/2025:15:55:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:19  10.244.9.47 - - [06/Dec/2025:15:55:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:21  [Vapi] ===== INCOMING REQUEST =====
Dec 06 15:55:21  [Vapi] Request body keys: [ 'message' ]
Dec 06 15:55:21  [Vapi] Raw body: {
Dec 06 15:55:21    "message": {
Dec 06 15:55:21      "timestamp": 1765036521086,
Dec 06 15:55:21      "type": "tool-calls",
Dec 06 15:55:21      "toolCalls": [
Dec 06 15:55:21        {
Dec 06 15:55:21          "id": "call_7fY8XtSC4saKbeotRuRspms5",
Dec 06 15:55:21          "type": "function",
Dec 06 15:55:21          "function": {
Dec 06 15:55:21            "name": "ragAssistantQuery",
Dec 06 15:55:21            "arguments": {
Dec 06 15:55:21              "query": "What is the address for project number 10001?",
Dec 06 15:55:21              "projectid": "10001"
Dec 06 15:55:21            }
Dec 06 15:55:21          }
Dec 06 15:55:21        }
Dec 06 15:55:21      ],
Dec 06 15:55:21      "toolCallList": [
Dec 06 15:55:21        {
Dec 06 15:55:21          "id": "call_7fY8XtSC4saKbeotRuRspms5",
Dec 06 15:55:21          "type": "function",
Dec 06 15:55:21          "function": {
Dec 06 15:55:21            "name": "ragAssistantQuery",
Dec 06 15:55:21            "arguments": {
Dec 06 15:55:21              "query": "What is the address for project number 10001?",
Dec 06 15:55:21              "projectid": "10001"
Dec 06 15:55:21            }
Dec 06 15:55:21          }
Dec 06 15:55:21        }
Dec 06 15:55:21      ],
Dec 06 15:55:21      "toolWithToolCallList": [
Dec 06 15:55:21        {
Dec 06 15:55:21          "type": "function",
Dec 06 15:55:21          "function": {
Dec 06 15:55:21            "name": "ragAssistantQuery",
Dec 06 15:55:21            "strict": true,
Dec 06 15:55:21            "parameters": {
Dec 06 15:55:21              "type": "object",
Dec 06 15:55:21              "required": [
Dec 06 15:55:21                "query"
Dec 06 15:55:21           
Dec 06 15:55:21  [Vapi] Parsed params: {
Dec 06 15:55:21    projectId: null,
Dec 06 15:55:21    query: '[object Object]',
Dec 06 15:55:21    userId: undefined,
Dec 06 15:55:21    userName: undefined,
Dec 06 15:55:21    hasVars: true,
Dec 06 15:55:21    varKeys: []
Dec 06 15:55:21  }
Dec 06 15:55:21  [Vapi] intent flags { wantsSend: false, docyIntent: false, query: '[object Object]' }
Dec 06 15:55:21  [Vapi] Skipping semanticSearch (no doc keywords) for query: [object Object]
Dec 06 15:55:21  [Vapi] Looking up user with ID: null
Dec 06 15:55:21  [Vapi] No user from request, looking up fallback user...
Dec 06 15:55:21  prisma:error 
Dec 06 15:55:21  Invalid `prisma.user.findFirst()` invocation:
Dec 06 15:55:21  
Dec 06 15:55:21  {
Dec 06 15:55:21    where: {
Dec 06 15:55:21      OR: [
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "ADMIN"
Dec 06 15:55:21        },
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "OWNER"
Dec 06 15:55:21        },
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "PROJECT_MANAGER"
Dec 06 15:55:21        }
Dec 06 15:55:21      ]
Dec 06 15:55:21    },
Dec 06 15:55:21    select: {
Dec 06 15:55:21      id: true,
Dec 06 15:55:21      firstName: true,
Dec 06 15:55:21      lastName: true,
Dec 06 15:55:21      email: true,
Dec 06 15:55:21      role: true
Dec 06 15:55:21    }
Dec 06 15:55:21  }
Dec 06 15:55:21  
Dec 06 15:55:21  Invalid value for argument `role`. Expected UserRole.
Dec 06 15:55:21  ‚ùå VAPI: Error loading context: PrismaClientValidationError: 
Dec 06 15:55:21  Invalid `prisma.user.findFirst()` invocation:
Dec 06 15:55:21  
Dec 06 15:55:21  {
Dec 06 15:55:21    where: {
Dec 06 15:55:21      OR: [
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "ADMIN"
Dec 06 15:55:21        },
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "OWNER"
Dec 06 15:55:21        },
Dec 06 15:55:21        {
Dec 06 15:55:21          role: "PROJECT_MANAGER"
Dec 06 15:55:21        }
Dec 06 15:55:21      ]
Dec 06 15:55:21    },
Dec 06 15:55:21    select: {
Dec 06 15:55:21      id: true,
Dec 06 15:43:19  
Dec 06 15:43:19  > kenstruction-server@0.1.0 start
Dec 06 15:43:19  > node server.js
Dec 06 15:43:19  
Dec 06 15:43:19  üöÄ Starting Kenstruction server...
Dec 06 15:43:19  üìÖ Startup time: 2025-12-06T15:43:19.304Z
Dec 06 15:43:20  üîí Using platform environment variables
Dec 06 15:43:20  ‚úÖ DATABASE_URL configured from environment
Dec 06 15:55:21      firstName: true,
Dec 06 15:55:21      lastName: true,
Dec 06 15:55:21      email: true,
Dec 06 15:55:21      role: true
Dec 06 15:55:21    }
Dec 06 15:55:21  }
Dec 06 15:55:21  
Dec 06 15:55:21  Invalid value for argument `role`. Expected UserRole.
Dec 06 15:55:21      at Nn (/app/node_modules/@prisma/client/runtime/library.js:29:1363)
Dec 06 15:55:21      at ei.handleRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6911)
Dec 06 15:55:21      at ei.handleAndLogRequestError (/app/node_modules/@prisma/client/runtime/library.js:121:6593)
Dec 06 15:55:21      at ei.request (/app/node_modules/@prisma/client/runtime/library.js:121:6300)
Dec 06 15:55:21      at async a (/app/node_modules/@prisma/client/runtime/library.js:130:9551)
Dec 06 15:55:21      at async /app/routes/vapi.js:1029:16 {
Dec 06 15:55:21    clientVersion: '6.19.0'
Dec 06 15:55:21  }
Dec 06 15:55:23  10.244.0.163 - - [06/Dec/2025:15:55:23 +0000] "POST /api/vapi/assistant-query HTTP/1.1" 200 101 "-" "axios/1.8.3"
Dec 06 15:55:24  10.244.0.163 - - [06/Dec/2025:15:55:24 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:55:29  10.244.9.47 - - [06/Dec/2025:15:55:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:39  10.244.9.47 - - [06/Dec/2025:15:55:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:49  10.244.9.47 - - [06/Dec/2025:15:55:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:49  üö® TRANSCRIPT ROUTE: enhance endpoint called - CODE VERSION 2
Dec 06 15:55:49  üîç TranscriptAIService: Starting generateProfessionalSummary
Dec 06 15:55:49  üîç TranscriptAIService: OpenAI enabled: true
Dec 06 15:43:20  üîç DATABASE_URL: postgresql://***:***@bubbles-data-do-user-23063858-0.l.db.ondigitalocean.com:25060/defaultdb?sslmode=require
Dec 06 15:43:20  ‚úÖ Required modules loaded successfully
Dec 06 15:43:20  ‚úÖ Uploads directory exists: /app/uploads
Dec 06 15:43:20  ‚úÖ Company-assets directory exists: /app/uploads/company-assets
Dec 06 15:43:20  ‚úÖ Documents directory exists: /app/uploads/documents
Dec 06 15:43:20  ‚úÖ Uploads directory is writable
Dec 06 15:43:22  ‚úÖ Resend Email Service initialized
Dec 06 15:43:22  üü° Redis not configured - using in-memory cache fallback
Dec 06 15:43:23  ‚úÖ Bubbles: EmbeddingService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: IngestionService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: AssetLookup loaded
Dec 06 15:43:23  ‚úÖ Bubbles: EnhancedDocumentDetection loaded
Dec 06 15:43:23  ‚úÖ Bubbles: EmailService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: BubblesContextService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: ProactiveNotificationsService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: CrossProjectAnalyticsService loaded
Dec 06 15:43:23  üîç OpenAI Initialization: Checking for API key...
Dec 06 15:43:23  üîç API Key present: true
Dec 06 15:43:23  üîç API Key length: 164
Dec 06 15:43:23  üîç API Key first 20 chars: sk-proj-0FpUNM3i-zgS...
Dec 06 15:43:23  üîç API Key last 4 chars: ...wk0A
Dec 06 15:43:23  üîç OpenAI: Loading OpenAI package...
Dec 06 15:43:23  üîç OpenAI: Creating v4 client...
Dec 06 15:43:23  ‚úÖ OpenAI service initialized successfully with model: gpt-4o
Dec 06 15:43:23  ‚úÖ Bubbles: OpenAIService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: BubblesInsightsService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: WorkflowActionService loaded
Dec 06 15:43:23  ‚úÖ Bubbles: BubblesInsightsService loaded
Dec 06 15:55:49  üîç TranscriptAIService: Input data: {
Dec 06 15:55:49    "fullTranscript": [
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Hi. This is Bubbles. How can I help you?",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Hello,",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:43:23  ‚úÖ Bubbles: WorkflowActionService loaded
Dec 06 15:43:23  üîç BUBBLES: Registering /chat route
Dec 06 15:43:23  üîç BUBBLES: Registering POST /chat route handler
Dec 06 15:43:23  ‚úÖ SERVER: Bubbles routes loaded successfully
Dec 06 15:43:25  üìù FORM_SUBMISSIONS: Loading form submissions routes
Dec 06 15:43:25  üîß SERVER: Loading workflow routes...
Dec 06 15:43:25  üîß WORKFLOW ROUTES: Loading workflow routes module
Dec 06 15:43:25  ‚úÖ SERVER: Workflow routes loaded successfully
Dec 06 15:43:25  üîß PHASE OVERRIDE ROUTES: Loading phase override routes module
Dec 06 15:43:25  üöÄ ONBOARDING: Loading onboarding routes module
Dec 06 15:43:25  üîß SERVER: Loading workflow import routes...
Dec 06 15:43:25  ‚úÖ SERVER: Workflow import routes loaded successfully
Dec 06 15:43:25  üîß SERVER: Loading project import routes...
Dec 06 15:43:25  ‚úÖ SERVER: Project import routes loaded successfully
Dec 06 15:43:25  üìÅ Uploads directory: /app/uploads
Dec 06 15:43:25  üìÅ Uploads exists: true
Dec 06 15:43:25  ‚úÖ SERVER: Workflow routes registered at /api/workflows
Dec 06 15:43:25  ‚úÖ SERVER: Bubbles routes registered at /api/bubbles
Dec 06 15:43:25  üîç SERVER: Bubbles router stack: MIDDLEWARE: /^\/?(?=\/|$)/i, GET /test, POST /complete-action, POST /chat, GET /history, POST /reset, GET /status, GET /insights/project/:projectId, GET /insights/portfolio, GET /insights/prediction/:projectId, GET /insights/risks/:projectId, GET /insights/optimization/:projectId, GET /project/:projectId/current-step
Dec 06 15:43:25  ‚úÖ SERVER: Bubbles Context routes registered at /api/bubbles/context
Dec 06 15:43:25  ‚úÖ SERVER: Workflow import routes registered at /api/workflow-import
Dec 06 15:43:25  ‚úÖ SERVER: Project import routes registered at /api/project-import
Dec 06 15:43:25  ‚úÖ TranscriptAIService: OpenAI initialized successfully
Dec 06 15:43:25  üîç FEEDBACK ROUTE DEBUG:
Dec 06 15:43:25  üîç DATABASE_URL present: true
Dec 06 15:43:25  üîç DATABASE_URL: postgresql://***:***@bubbles-data-do-user-23063858-0.l.db.ondigitalocean.com:25060/defaultdb?sslmode=require
Dec 06 15:43:25  ‚úÖ SERVER: Form submissions routes registered at /api/form-submissions
Dec 06 15:43:25  ‚úÖ SERVER: Bubbles routes also registered at /bubbles (backward compatibility)
Dec 06 15:43:25  üèóÔ∏è Server directory: /app
Dec 06 15:43:25  üèóÔ∏è Build path candidates: [ '/app/public', '/build', '/app/build' ]
Dec 06 15:43:25  üèóÔ∏è Selected build path: /app/public
Dec 06 15:43:25  üèóÔ∏è Build exists? true
Dec 06 15:43:25  üìÅ Files in /app: [
Dec 06 15:43:25    '5year-warranty-test.pdf',
Dec 06 15:43:25    'COMPANY_DOCS_MIGRATION_README.md',
Dec 06 15:43:25    'README-BUBBLES.md',
Dec 06 15:43:25    '__tests__',
Dec 06 15:43:25    'add-new-templates.js',
Dec 06 15:43:25    'check-db.js',
Dec 06 15:43:25    'clean-duplicate-alerts.js',
Dec 06 15:43:25    'config',
Dec 06 15:43:25    'coordinate-grid.pdf',
Dec 06 15:43:25    'create-feedback-table.js',
Dec 06 15:43:25    'create-feedback-tables-working.js',
Dec 06 15:43:25    'create-tables-direct.sql',
Dec 06 15:43:25    'create-tables-simple.js',
Dec 06 15:43:25    'data',
Dec 06 15:43:25    'diagnose-db.js',
Dec 06 15:43:25    'exports',
Dec 06 15:43:25    'field-position-test.pdf',
Dec 06 15:43:25    'fix-feedback-tables.js',
Dec 06 15:43:25    'fix-missing-prisma-imports.js',
Dec 06 15:43:25    'fix-prisma-connections.js',
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Hi, Bob.",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "You to give me",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "the",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "for project number 1 0 0 0 1.",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:43:25    'fix-production-db.js',
Dec 06 15:43:25    'fix_workflow_progress.js',
Dec 06 15:43:25    'jest-results.json',
Dec 06 15:43:25    'jest.config.js',
Dec 06 15:43:25    'jobs',
Dec 06 15:43:25    'middleware',
Dec 06 15:43:25    'migrate_project_workflow_tracker.js',
Dec 06 15:43:25    'node_modules',
Dec 06 15:43:25    'package-lock.json',
Dec 06 15:43:25    'package.json',
Dec 06 15:43:25    'prisma',
Dec 06 15:43:25    'public',
Dec 06 15:43:25    'routes',
Dec 06 15:43:25    'run-on-production.js',
Dec 06 15:43:25    'scripts',
Dec 06 15:43:25    'server.js',
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Just took",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Just to confirm, could you clarify what information you need for project number 10",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "project number 10000",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "project number 10001?",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:43:25    'services',
Dec 06 15:43:25    'test-feedback-api.js',
Dec 06 15:43:25    'test-feedback-query.js',
Dec 06 15:43:25    'test-feedback-route.js',
Dec 06 15:43:25    'test-feedback-simple.js',
Dec 06 15:43:25    'test-production.js',
Dec 06 15:43:25    'test-route.js',
Dec 06 15:43:25    'uploads',
Dec 06 15:43:25    'utils'
Dec 06 15:43:25  ]
Dec 06 15:43:25  üìÖ Starting overdue alert scheduler (checking every 30 minutes)
Dec 06 15:43:25  ‚ö†Ô∏è Database not connected, skipping overdue alert check
Dec 06 15:43:25  üîß Debug: PORT from env = 8080, final PORT = 8080
Dec 06 15:43:25  üîß Debug: NODE_ENV = production
Dec 06 15:43:25  üîß Debug: DATABASE_URL present = true
Dec 06 15:43:25  üîß Debug: JWT_SECRET present = true
Dec 06 15:43:25  üöÄ Kenstruction server running on port 8080
Dec 06 15:43:25  üåç Environment: production
Dec 06 15:43:25  üîó API Base URL: http://0.0.0.0:8080/api
Dec 06 15:43:25  üì° Socket.IO server ready for real-time connections
Dec 06 15:43:25  ‚úÖ Server startup completed successfully
Dec 06 15:43:27  ‚úÖ Connected to PostgreSQL database successfully
Dec 06 15:43:27  üìä Database ready - Found 33 users
Dec 06 15:43:27  ‚úÖ Database connection established, initializing services...
Dec 06 15:43:27  üîß Ensuring lead_sources schema and projects.lead_source_id column exist...
Dec 06 15:43:27  ‚úÖ Lead sources schema ensured
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Are you looking for a project",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "overview",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "a specific document,",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "or something else, let me know so I can get exactly what you",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "something else, let me know so I can get exactly what you need.",
Dec 06 15:43:27  üß± Lead sources schema ensured (startup)
Dec 06 15:43:27  ‚ÑπÔ∏è Embeddings table uses text storage - skipping vector index creation
Dec 06 15:43:27  üßÆ pgvector schema ready
Dec 06 15:43:29  10.244.4.175 - - [06/Dec/2025:15:43:29 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:43:29  üì¶ Initializing Alert Cache Service...
Dec 06 15:43:29  üö® WorkflowAlertService ENABLED - PostgreSQL migration complete
Dec 06 15:43:29  ‚è∞ Alert Scheduler ENABLED - PostgreSQL migration complete
Dec 06 15:43:29  üöÄ Alert scheduler started - checking workflow deadlines every 5 minutes
Dec 06 15:43:29  üîç Checking workflow alerts...
Dec 06 15:43:29  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:43:30  üöÄ Generating alerts for 1 active projects
Dec 06 15:43:30  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:43:30  No new alerts to create
Dec 06 15:43:30  ‚úÖ Generated 0 new alerts
Dec 06 15:43:30  üî• Warmed up alert cache for 1 active users
Dec 06 15:43:30  ‚úÖ Alert cache warmed up
Dec 06 15:43:30  Follow-up scheduler started - running every hour
Dec 06 15:43:30  ‚è∞ Follow-up scheduler started
Dec 06 15:43:39  10.244.4.175 - - [06/Dec/2025:15:43:39 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:43:45  10.244.30.34 - - [06/Dec/2025:15:43:45 +0000] "GET /api/documents/project/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:43:49  10.244.4.175 - - [06/Dec/2025:15:43:49 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:43:54  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:43:54  üéØ API: Found position: {
Dec 06 15:43:54    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "I only need the address.",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Only the address.",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "Sorry. A few more seconds.",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:43:54    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:43:54    phaseType: 'LEAD',
Dec 06 15:43:54    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:54    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:54    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:54    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:54    currentLineItemName: 'Answer phone call',
Dec 06 15:43:54    sectionDisplayName: 'Initial Contact',
Dec 06 15:43:54    phaseName: 'Lead'
Dec 06 15:43:54  }
Dec 06 15:43:54  10.244.3.115 - - [06/Dec/2025:15:43:54 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:43:55  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:43:55  üéØ API: Found position: {
Dec 06 15:43:55    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:43:55    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:43:55    phaseType: 'LEAD',
Dec 06 15:43:55    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:55    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:55    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:55    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:55    currentLineItemName: 'Answer phone call',
Dec 06 15:43:55    sectionDisplayName: 'Initial Contact',
Dec 06 15:43:55    phaseName: 'Lead'
Dec 06 15:43:55  }
Dec 06 15:43:55  10.244.3.115 - - [06/Dec/2025:15:43:55 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:43:56  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:55:49        "message": "I wasn't able to find the address for project",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "for project number 1 0 0 0 1 right away. Could you double check the project number",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      },
Dec 06 15:55:49      {
Dec 06 15:55:49        "timestamp": "2025-12-06T15:55:50.051Z",
Dec 06 15:55:49        "speaker": "You",
Dec 06 15:55:49        "message": "or let me know if there's another way I can help?",
Dec 06 15:55:49        "confidence": "high"
Dec 06 15:55:49      }
Dec 06 15:55:49    ],
Dec 06 15:55:49    "metadata": {
Dec 06 15:55:49      "callDate": "12/6/2025",
Dec 06 15:55:49      "callTime": "10:54:46 AM - 10:55:50 AM",
Dec 06 15:55:49      "duration": "Unknown",
Dec 06 15:55:49      "participantCount": 1
Dec 06 15:55:49    },
Dec 06 15:55:49    "projectInfo": null
Dec 06 15:55:49  }
Dec 06 15:55:49  üîç TranscriptAIService: About to call OpenAI API
Dec 06 15:43:56  üéØ API: Found position: {
Dec 06 15:43:56    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:43:56    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:43:56    phaseType: 'LEAD',
Dec 06 15:43:56    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:56    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:56    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:56    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:56    currentLineItemName: 'Answer phone call',
Dec 06 15:43:56    sectionDisplayName: 'Initial Contact',
Dec 06 15:43:56    phaseName: 'Lead'
Dec 06 15:43:56  }
Dec 06 15:43:56  10.244.3.115 - - [06/Dec/2025:15:43:56 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:43:56  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:43:56  üéØ API: Found position: {
Dec 06 15:43:56    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:43:56    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:43:56    phaseType: 'LEAD',
Dec 06 15:43:56    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:56    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:43:56    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:55:49  üîç TranscriptAIService: Model: gpt-4o
Dec 06 15:55:55  üîç TranscriptAIService: OpenAI API call successful
Dec 06 15:55:55  10.244.26.130 - - [06/Dec/2025:15:55:55 +0000] "POST /api/transcripts/enhance HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:55:59  10.244.9.47 - - [06/Dec/2025:15:55:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:02  üë• ROLES API: Fetching available users
Dec 06 15:56:02  üîç Where clause: { archived: false }
Dec 06 15:56:02  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:56:02  ‚úÖ ROLES API: Found 33 active users
Dec 06 15:56:02  10.244.3.115 - - [06/Dec/2025:15:56:02 +0000] "GET /api/roles/users HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:02  üîç ACTIVITIES: Fetching 50 recent activities for user cmfld60ef0000bi0d8ky8hlot...
Dec 06 15:56:02  10.244.26.130 - - [06/Dec/2025:15:56:02 +0000] "GET /api/activities/recent?limit=50 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:02  10.244.0.163 - - [06/Dec/2025:15:56:02 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:09  10.244.9.47 - - [06/Dec/2025:15:56:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:19  10.244.9.47 - - [06/Dec/2025:15:56:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:29  10.244.9.47 - - [06/Dec/2025:15:56:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:36  üîç Where clause: { archived: false }
Dec 06 15:56:36  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:56:36  10.244.0.163 - - [06/Dec/2025:15:56:36 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:39  10.244.9.47 - - [06/Dec/2025:15:56:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:43:56    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:43:56    currentLineItemName: 'Answer phone call',
Dec 06 15:43:56    sectionDisplayName: 'Initial Contact',
Dec 06 15:43:56    phaseName: 'Lead'
Dec 06 15:43:56  }
Dec 06 15:43:56  10.244.3.115 - - [06/Dec/2025:15:43:56 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:43:59  10.244.4.175 - - [06/Dec/2025:15:43:59 +0000] "GET /api/health HTTP/1.1" 200 376 "-" "kube-probe/1.31"
Dec 06 15:44:09  10.244.4.175 - - [06/Dec/2025:15:44:09 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:44:19  10.244.4.175 - - [06/Dec/2025:15:44:19 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:44:29  10.244.4.175 - - [06/Dec/2025:15:44:29 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:44:39  10.244.4.175 - - [06/Dec/2025:15:44:39 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:44:49  10.244.4.175 - - [06/Dec/2025:15:44:49 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:44:59  10.244.4.175 - - [06/Dec/2025:15:44:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:45:00  üîç Checking workflow alerts...
Dec 06 15:45:00  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:45:00  üöÄ Generating alerts for 1 active projects
Dec 06 15:45:00  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:45:00  No new alerts to create
Dec 06 15:45:00  ‚úÖ Generated 0 new alerts
Dec 06 15:45:09  10.244.4.175 - - [06/Dec/2025:15:45:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:45:19  10.244.4.175 - - [06/Dec/2025:15:45:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:45:26  10.244.3.115 - - [06/Dec/2025:15:45:26 +0000] "GET /static/js/main.b3faca89.js HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:27  10.244.26.130 - - [06/Dec/2025:15:45:27 +0000] "GET /bubbles-logo.png HTTP/1.1" 200 61767 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:28  10.244.30.34 - - [06/Dec/2025:15:45:28 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:28  üì≠ Cache miss: activities:{"userId":"cmfld60ef0000bi0d8ky8hlot"}
Dec 06 15:45:28  üîç ACTIVITIES: User from request: {
Dec 06 15:45:28    id: 'cmfld60ef0000bi0d8ky8hlot',
Dec 06 15:45:28    firstName: 'James',
Dec 06 15:45:28    lastName: 'Kelly',
Dec 06 15:45:28    email: 'jimbosky35@gmail.com',
Dec 06 15:45:28    role: 'WORKER',
Dec 06 15:45:28    permissions: [],
Dec 06 15:45:28    isActive: true,
Dec 06 15:45:28    theme: 'LIGHT',
Dec 06 15:45:28    lastLogin: 2025-12-06T15:38:56.004Z,
Dec 06 15:45:28    createdAt: 2025-09-15T16:54:10.310Z,
Dec 06 15:45:28    updatedAt: 2025-12-06T15:38:56.006Z
Dec 06 15:45:28  }
Dec 06 15:45:28  üîç ACTIVITIES: Fetching messages, tasks, reminders as activities...
Dec 06 15:45:28  10.244.3.115 - - [06/Dec/2025:15:45:28 +0000] "GET /kenstruction-logo.png HTTP/1.1" 200 61767 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:28  üì• Cached: activities:{"userId":"cmfld60ef0000bi0d8ky8hlot"} (TTL: 60s)
Dec 06 15:45:28  10.244.26.130 - - [06/Dec/2025:15:45:28 +0000] "GET /api/activities HTTP/1.1" 200 262 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:28  10.244.26.130 - - [06/Dec/2025:15:45:28 +0000] "GET /api/tasks?page=1&limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:28  üîç Where clause: { archived: false }
Dec 06 15:45:28  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:45:28  üìÖ CALENDAR: GET /api/calendar-events - Request received
Dec 06 15:45:28  üîç ACTIVITIES: Fetching 50 recent activities for user cmfld60ef0000bi0d8ky8hlot...
Dec 06 15:45:29  10.244.3.115 - - [06/Dec/2025:15:45:29 +0000] "GET /api/calendar-events?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:29  10.244.30.34 - - [06/Dec/2025:15:45:29 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:29  10.244.0.163 - - [06/Dec/2025:15:45:29 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:29  10.244.26.130 - - [06/Dec/2025:15:45:29 +0000] "GET /api/activities/recent?limit=50 HTTP/1.1" 200 118 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:29  üìÖ CALENDAR: POST /api/calendar-events - Request received
Dec 06 15:45:29  10.244.3.115 - - [06/Dec/2025:15:45:29 +0000] "POST /api/calendar-events HTTP/1.1" 404 47 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:29  10.244.4.175 - - [06/Dec/2025:15:45:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:45:30  üìÖ CALENDAR: POST /api/calendar-events - Request received
Dec 06 15:45:31  10.244.0.163 - - [06/Dec/2025:15:45:31 +0000] "POST /api/calendar-events HTTP/1.1" 201 980 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:32  üìÖ CALENDAR: POST /api/calendar-events - Request received
Dec 06 15:45:32  10.244.3.115 - - [06/Dec/2025:15:45:32 +0000] "POST /api/calendar-events HTTP/1.1" 404 47 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:32  üìÖ CALENDAR: POST /api/calendar-events - Request received
Dec 06 15:45:32  10.244.0.163 - - [06/Dec/2025:15:45:32 +0000] "POST /api/calendar-events HTTP/1.1" 201 977 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:32  10.244.30.34 - - [06/Dec/2025:15:45:32 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:33  10.244.30.34 - - [06/Dec/2025:15:45:33 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:39  10.244.4.175 - - [06/Dec/2025:15:45:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:45:42  10.244.3.115 - - [06/Dec/2025:15:45:42 +0000] "GET / HTTP/1.1" 200 685 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:43  10.244.30.34 - - [06/Dec/2025:15:45:43 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:44  üîç Where clause: { archived: false }
Dec 06 15:45:44  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:45:44  10.244.3.115 - - [06/Dec/2025:15:45:44 +0000] "GET /api/projects HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:44  üö® ALERTS ROUTE: Fetching workflow alerts...
Dec 06 15:45:44  üö® ALERTS ROUTE: Found 1 alerts from database
Dec 06 15:45:44  10.244.26.130 - - [06/Dec/2025:15:45:44 +0000] "GET /api/tasks?page=1&limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:44  10.244.0.163 - - [06/Dec/2025:15:45:44 +0000] "GET /api/alerts?limit=200 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:44  10.244.30.34 - - [06/Dec/2025:15:45:44 +0000] "GET /api/auth/me HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:44  üìÖ CALENDAR: GET /api/calendar-events - Request received
Dec 06 15:45:44  üîç Where clause: { archived: false }
Dec 06 15:45:44  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:45:44  üîç ACTIVITIES: Fetching 50 recent activities for user cmfld60ef0000bi0d8ky8hlot...
Dec 06 15:45:44  üë• ROLES API: Fetching available users
Dec 06 15:45:45  ‚úÖ ROLES API: Found 33 active users
Dec 06 15:45:45  10.244.3.115 - - [06/Dec/2025:15:45:45 +0000] "GET /api/roles/users HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  10.244.3.115 - - [06/Dec/2025:15:45:45 +0000] "GET /api/calendar-events?limit=20 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  üîç FEEDBACK DEBUG: About to query feedback table
Dec 06 15:45:45  üîç FEEDBACK DEBUG: where clause: {}
Dec 06 15:45:45  10.244.26.130 - - [06/Dec/2025:15:45:45 +0000] "GET /api/activities/recent?limit=50 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  10.244.0.163 - - [06/Dec/2025:15:45:45 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  10.244.26.130 - - [06/Dec/2025:15:45:45 +0000] "GET /api/feedback?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  10.244.0.163 - - [06/Dec/2025:15:45:45 +0000] "GET /favicon.ico HTTP/1.1" 200 685 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:45  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:45:45  üéØ API: Found position: {
Dec 06 15:45:45    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:45:45    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:45:45    phaseType: 'LEAD',
Dec 06 15:45:45    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:45:45    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:45:45    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:45:45    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:45:45    currentLineItemName: 'Answer phone call',
Dec 06 15:45:45    sectionDisplayName: 'Initial Contact',
Dec 06 15:45:45    phaseName: 'Lead'
Dec 06 15:45:45  }
Dec 06 15:45:45  10.244.3.115 - - [06/Dec/2025:15:45:45 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:45:49  10.244.4.175 - - [06/Dec/2025:15:45:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:45:59  10.244.4.175 - - [06/Dec/2025:15:45:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:46:09  10.244.4.175 - - [06/Dec/2025:15:46:09 +0000] "GET /api/health HTTP/1.1" 200 376 "-" "kube-probe/1.31"
Dec 06 15:46:19  10.244.4.175 - - [06/Dec/2025:15:46:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:46:29  10.244.4.175 - - [06/Dec/2025:15:46:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:46:39  10.244.4.175 - - [06/Dec/2025:15:46:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:46:49  10.244.4.175 - - [06/Dec/2025:15:46:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:46:59  10.244.4.175 - - [06/Dec/2025:15:46:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:47:09  10.244.4.175 - - [06/Dec/2025:15:47:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:47:19  10.244.4.175 - - [06/Dec/2025:15:47:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:47:29  10.244.4.175 - - [06/Dec/2025:15:47:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:47:39  10.244.4.175 - - [06/Dec/2025:15:47:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:47:49  10.244.4.175 - - [06/Dec/2025:15:47:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:47:59  10.244.4.175 - - [06/Dec/2025:15:47:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:48:09  10.244.4.175 - - [06/Dec/2025:15:48:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:48:19  10.244.4.175 - - [06/Dec/2025:15:48:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:48:29  10.244.4.175 - - [06/Dec/2025:15:48:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:48:39  10.244.4.175 - - [06/Dec/2025:15:48:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:48:49  10.244.4.175 - - [06/Dec/2025:15:48:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:48:59  10.244.4.175 - - [06/Dec/2025:15:48:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:49:09  10.244.4.175 - - [06/Dec/2025:15:49:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:49:19  10.244.4.175 - - [06/Dec/2025:15:49:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:49:29  10.244.4.175 - - [06/Dec/2025:15:49:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:49:39  10.244.4.175 - - [06/Dec/2025:15:49:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:49:49  10.244.4.175 - - [06/Dec/2025:15:49:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:49:59  10.244.4.175 - - [06/Dec/2025:15:49:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:50:00  üîç Checking workflow alerts...
Dec 06 15:50:00  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:50:00  üöÄ Generating alerts for 1 active projects
Dec 06 15:50:00  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:50:00  No new alerts to create
Dec 06 15:50:00  ‚úÖ Generated 0 new alerts
Dec 06 15:50:09  10.244.4.175 - - [06/Dec/2025:15:50:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:50:19  10.244.4.175 - - [06/Dec/2025:15:50:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:50:29  10.244.4.175 - - [06/Dec/2025:15:50:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:50:39  10.244.4.175 - - [06/Dec/2025:15:50:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:50:49  10.244.4.175 - - [06/Dec/2025:15:50:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:50:59  10.244.4.175 - - [06/Dec/2025:15:50:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:09  10.244.4.175 - - [06/Dec/2025:15:51:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:51:17  üîç Where clause: { archived: false }
Dec 06 15:51:17  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:51:17  10.244.0.163 - - [06/Dec/2025:15:51:17 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:19  10.244.4.175 - - [06/Dec/2025:15:51:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:51:21  10.244.3.115 - - [06/Dec/2025:15:51:21 +0000] "GET / HTTP/1.1" 200 685 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:22  10.244.26.130 - - [06/Dec/2025:15:51:22 +0000] "GET /bubbles-logo.png HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.3.115 - - [06/Dec/2025:15:51:23 +0000] "GET /kenstruction-logo.png HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üì≠ Cache miss: activities:{"userId":"cmfld60ef0000bi0d8ky8hlot"}
Dec 06 15:51:23  üîç ACTIVITIES: User from request: {
Dec 06 15:51:23    id: 'cmfld60ef0000bi0d8ky8hlot',
Dec 06 15:51:23    firstName: 'James',
Dec 06 15:51:23    lastName: 'Kelly',
Dec 06 15:51:23    email: 'jimbosky35@gmail.com',
Dec 06 15:51:23    role: 'WORKER',
Dec 06 15:51:23    permissions: [],
Dec 06 15:51:23    isActive: true,
Dec 06 15:51:23    theme: 'LIGHT',
Dec 06 15:51:23    lastLogin: 2025-12-06T15:38:56.004Z,
Dec 06 15:51:23    createdAt: 2025-09-15T16:54:10.310Z,
Dec 06 15:51:23    updatedAt: 2025-12-06T15:38:56.006Z
Dec 06 15:51:23  }
Dec 06 15:51:23  üîç ACTIVITIES: Fetching messages, tasks, reminders as activities...
Dec 06 15:51:23  üîç Where clause: { archived: false }
Dec 06 15:51:23  üîç OrderBy clause: { createdAt: 'desc' }
Dec 06 15:51:23  üì• Cached: activities:{"userId":"cmfld60ef0000bi0d8ky8hlot"} (TTL: 60s)
Dec 06 15:51:23  10.244.26.130 - - [06/Dec/2025:15:51:23 +0000] "GET /api/tasks?page=1&limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  üë• ROLES API: Fetching available users
Dec 06 15:51:23  10.244.26.130 - - [06/Dec/2025:15:51:23 +0000] "GET /api/activities HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  ‚úÖ ROLES API: Found 33 active users
Dec 06 15:51:23  10.244.3.115 - - [06/Dec/2025:15:51:23 +0000] "GET /api/roles/users HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:23  10.244.0.163 - - [06/Dec/2025:15:51:23 +0000] "GET /api/projects?limit=100 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:51:29  10.244.4.175 - - [06/Dec/2025:15:51:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:51:39  10.244.4.175 - - [06/Dec/2025:15:51:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:51:49  10.244.4.175 - - [06/Dec/2025:15:51:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:51:59  10.244.4.175 - - [06/Dec/2025:15:51:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:09  10.244.4.175 - - [06/Dec/2025:15:52:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:19  10.244.4.175 - - [06/Dec/2025:15:52:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:29  10.244.0.163 - - [06/Dec/2025:15:52:29 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:52:29  10.244.4.175 - - [06/Dec/2025:15:52:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:32  10.244.0.163 - - [06/Dec/2025:15:52:32 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:52:39  10.244.4.175 - - [06/Dec/2025:15:52:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:49  10.244.4.175 - - [06/Dec/2025:15:52:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:52:59  10.244.4.175 - - [06/Dec/2025:15:52:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:08  10.244.3.115 - - [06/Dec/2025:15:53:08 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:53:09  10.244.4.175 - - [06/Dec/2025:15:53:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:19  10.244.4.175 - - [06/Dec/2025:15:53:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:29  10.244.4.175 - - [06/Dec/2025:15:53:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:39  10.244.4.175 - - [06/Dec/2025:15:53:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:49  10.244.4.175 - - [06/Dec/2025:15:53:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:53:58  üö® TRANSCRIPT ROUTE: enhance endpoint called - CODE VERSION 2
Dec 06 15:53:58  üîç TranscriptAIService: Starting generateProfessionalSummary
Dec 06 15:53:58  üîç TranscriptAIService: OpenAI enabled: true
Dec 06 15:53:58  üîç TranscriptAIService: Input data: {
Dec 06 15:53:58    "fullTranscript": [
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Bubbles. How can I help you?",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Hey, Bill.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Hey, Bose.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Hey, Bulls. Can you please tell me the number",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "of the project",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "in our system?",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "For",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Hi. This is Bubbles. I'd be happy to help. Could you tell me the project",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "name or address you're referring to? That way I can look up the",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "name or address you're referring to? That way, I can look up the project number for you.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "name or address you're referring to? That way I can look up the project number for you.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "I just want you to tell me the",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "product number of any projects that are",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "our system that",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "our system right now.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Got it.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "To help you out, could you clarify which project you'd like the number for?",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Or would you like me to list",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "a few current project numbers from the system? If you wanna list, just let",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "me know how many you need, and I'll get those for you.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "I want you to list all the projects in our application right now.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "The project",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Product numbers of all the projects.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Project numbers of all the projects.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Thanks for clarifying. I don't have direct",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "to list every project in the system.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "to list every project in the system all at once. If you let me know as",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "to list every project in the system all at once. If you let me know a specific",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "project name, address, or client, I can quickly look up",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "up the project number for you. If you need a list of all projects, I recommend",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "I recommend reaching out to the office or your administrator for a full",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Would you like me to help with a",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "specific project, or is there",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "specific project or is there something else I can assist with?",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Yeah. This",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Yeah. These are the",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "address. It's 16 6",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "address. It's 16 16",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Hollywood Road.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Knoxville, Tennessee.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Knoxville, Tennessee 3 7 9 0",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "0 9.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "What's the",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Sorry. A few more seconds.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Thanks for the extra detail.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "Thanks for the extra details. Let me check",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "for the project number for 16 60 Tollywood Road in Knoxville, Tennessee.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "3 7 9 0 0 9.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "1 moment.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      },
Dec 06 15:53:58      {
Dec 06 15:53:58        "timestamp": "2025-12-06T15:53:58.773Z",
Dec 06 15:53:58        "speaker": "You",
Dec 06 15:53:58        "message": "1 moment while I look that up for you.",
Dec 06 15:53:58        "confidence": "high"
Dec 06 15:53:58      }
Dec 06 15:53:58    ],
Dec 06 15:53:58    "metadata": {
Dec 06 15:53:58      "callDate": "12/6/2025",
Dec 06 15:53:58      "callTime": "10:51:39 AM - 10:53:58 AM",
Dec 06 15:53:58      "duration": "Unknown",
Dec 06 15:53:58      "participantCount": 1
Dec 06 15:53:58    },
Dec 06 15:53:58    "projectInfo": null
Dec 06 15:53:58  }
Dec 06 15:53:58  üîç TranscriptAIService: About to call OpenAI API
Dec 06 15:53:58  üîç TranscriptAIService: Model: gpt-4o
Dec 06 15:53:59  10.244.4.175 - - [06/Dec/2025:15:53:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:04  üîç TranscriptAIService: OpenAI API call successful
Dec 06 15:54:04  10.244.0.163 - - [06/Dec/2025:15:54:04 +0000] "POST /api/transcripts/enhance HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:54:04  10.244.3.115 - - [06/Dec/2025:15:54:04 +0000] "POST /api/voice-transcripts HTTP/1.1" 201 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:54:09  10.244.4.175 - - [06/Dec/2025:15:54:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:18  Error generating transcript files: Error: switchToPage(0) out of bounds, current buffer covers pages 4 to 4
Dec 06 15:54:18      at PDFDocument.switchToPage (/app/node_modules/pdfkit/js/pdfkit.js:5847:13)
Dec 06 15:54:18      at PDFGeneratorService.addFooter (/app/services/PDFGeneratorService.js:633:17)
Dec 06 15:54:18      at /app/services/PDFGeneratorService.js:203:22
Dec 06 15:54:18      at new Promise (<anonymous>)
Dec 06 15:54:18      at PDFGeneratorService.generateTranscriptPDF (/app/services/PDFGeneratorService.js:121:16)
Dec 06 15:54:18      at /app/routes/transcripts.js:111:65
Dec 06 15:54:18      at /app/middleware/errorHandler.js:151:19
Dec 06 15:54:18      at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
Dec 06 15:54:18      at next (/app/node_modules/express/lib/router/route.js:149:13)
Dec 06 15:54:18      at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)
Dec 06 15:54:18  üö® SERVER ERROR: {
Dec 06 15:54:18    "timestamp": "2025-12-06T15:54:18.219Z",
Dec 06 15:54:18    "method": "POST",
Dec 06 15:54:18    "url": "/api/transcripts/generate",
Dec 06 15:54:18    "ip": "10.244.0.163",
Dec 06 15:54:18    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36",
Dec 06 15:54:18    "userId": "cmfld60ef0000bi0d8ky8hlot",
Dec 06 15:54:18    "error": {
Dec 06 15:54:18      "message": "Failed to generate transcript files",
Dec 06 15:54:18      "statusCode": 500
Dec 06 15:54:18    }
Dec 06 15:54:18  }
Dec 06 15:54:18  10.244.0.163 - - [06/Dec/2025:15:54:18 +0000] "POST /api/transcripts/generate HTTP/1.1" 500 104 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:54:18  Error generating transcript files: Error: switchToPage(0) out of bounds, current buffer covers pages 4 to 4
Dec 06 15:54:18      at PDFDocument.switchToPage (/app/node_modules/pdfkit/js/pdfkit.js:5847:13)
Dec 06 15:54:18      at PDFGeneratorService.addFooter (/app/services/PDFGeneratorService.js:633:17)
Dec 06 15:54:18      at /app/services/PDFGeneratorService.js:203:22
Dec 06 15:54:18      at new Promise (<anonymous>)
Dec 06 15:54:18      at PDFGeneratorService.generateTranscriptPDF (/app/services/PDFGeneratorService.js:121:16)
Dec 06 15:54:18      at /app/routes/transcripts.js:111:65
Dec 06 15:54:18      at /app/middleware/errorHandler.js:151:19
Dec 06 15:54:18      at Layer.handle [as handle_request] (/app/node_modules/express/lib/router/layer.js:95:5)
Dec 06 15:54:18      at next (/app/node_modules/express/lib/router/route.js:149:13)
Dec 06 15:54:18      at Route.dispatch (/app/node_modules/express/lib/router/route.js:119:3)
Dec 06 15:54:18  üö® SERVER ERROR: {
Dec 06 15:54:18    "timestamp": "2025-12-06T15:54:18.439Z",
Dec 06 15:54:18    "method": "POST",
Dec 06 15:54:18    "url": "/api/transcripts/generate",
Dec 06 15:54:18    "ip": "10.244.3.115",
Dec 06 15:54:18    "userAgent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36",
Dec 06 15:54:18    "userId": "cmfld60ef0000bi0d8ky8hlot",
Dec 06 15:54:18    "error": {
Dec 06 15:54:18      "message": "Failed to generate transcript files",
Dec 06 15:54:18      "statusCode": 500
Dec 06 15:54:18    }
Dec 06 15:54:18  }
Dec 06 15:54:18  10.244.3.115 - - [06/Dec/2025:15:54:18 +0000] "POST /api/transcripts/generate HTTP/1.1" 500 104 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:54:19  10.244.4.175 - - [06/Dec/2025:15:54:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:29  10.244.4.175 - - [06/Dec/2025:15:54:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:39  10.244.4.175 - - [06/Dec/2025:15:54:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:49  10.244.4.175 - - [06/Dec/2025:15:54:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:54:59  10.244.4.175 - - [06/Dec/2025:15:54:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:55:00  üîç Checking workflow alerts...
Dec 06 15:55:00  üìä Using modernized alert generation via AlertGenerationService
Dec 06 15:55:00  üöÄ Generating alerts for 1 active projects
Dec 06 15:55:00  ‚ö†Ô∏è Skipping duplicate alert for Answer phone call on project 10001
Dec 06 15:55:00  No new alerts to create
Dec 06 15:55:00  ‚úÖ Generated 0 new alerts
Dec 06 15:55:02  10.244.30.34 - - [06/Dec/2025:15:55:02 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:55:09  10.244.4.175 - - [06/Dec/2025:15:55:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:55:19  10.244.4.175 - - [06/Dec/2025:15:55:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:55:20  10.244.0.163 - - [06/Dec/2025:15:55:20 +0000] "POST /api/vapi/kb/search HTTP/1.1" 200 16 "-" "axios/1.8.3"
Dec 06 15:55:29  10.244.4.175 - - [06/Dec/2025:15:55:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:55:39  10.244.4.175 - - [06/Dec/2025:15:55:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:55:49  10.244.4.175 - - [06/Dec/2025:15:55:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:55:55  10.244.0.163 - - [06/Dec/2025:15:55:55 +0000] "POST /api/voice-transcripts HTTP/1.1" 201 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:55:59  10.244.4.175 - - [06/Dec/2025:15:55:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:56:02  üéØ API: Getting project position for: cmiugn6g50001cc0dx5ye3bfj
Dec 06 15:56:02  üéØ API: Found position: {
Dec 06 15:56:02    projectId: 'cmiugn6g50001cc0dx5ye3bfj',
Dec 06 15:56:02    currentPhase: 'cmflogz0j0000j8a40o4hdr5y',
Dec 06 15:56:02    phaseType: 'LEAD',
Dec 06 15:56:02    currentSection: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:56:02    currentSectionId: 'cmflogz8t0006j8a4wl5qut2l',
Dec 06 15:56:02    currentLineItem: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:56:02    currentLineItemId: 'cmflogzgx0007j8a4ai04f4z0',
Dec 06 15:56:02    currentLineItemName: 'Answer phone call',
Dec 06 15:56:02    sectionDisplayName: 'Initial Contact',
Dec 06 15:56:02    phaseName: 'Lead'
Dec 06 15:56:02  }
Dec 06 15:56:02  10.244.3.115 - - [06/Dec/2025:15:56:02 +0000] "GET /api/workflow-data/project-position/cmiugn6g50001cc0dx5ye3bfj HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:02  üö® ALERTS ROUTE: Fetching workflow alerts...
Dec 06 15:56:02  üö® ALERTS ROUTE: Found 1 alerts from database
Dec 06 15:56:02  10.244.0.163 - - [06/Dec/2025:15:56:02 +0000] "GET /api/alerts?limit=200 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:02  üîç FEEDBACK DEBUG: About to query feedback table
Dec 06 15:56:02  üîç FEEDBACK DEBUG: where clause: {}
Dec 06 15:56:02  10.244.26.130 - - [06/Dec/2025:15:56:02 +0000] "GET /api/feedback?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:09  10.244.4.175 - - [06/Dec/2025:15:56:09 +0000] "GET /api/health HTTP/1.1" 200 377 "-" "kube-probe/1.31"
Dec 06 15:56:19  10.244.4.175 - - [06/Dec/2025:15:56:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:29  10.244.4.175 - - [06/Dec/2025:15:56:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:56:35  üö® ALERTS ROUTE: Fetching workflow alerts...
Dec 06 15:56:36  üö® ALERTS ROUTE: Found 1 alerts from database
Dec 06 15:56:36  10.244.0.163 - - [06/Dec/2025:15:56:36 +0000] "GET /api/alerts?limit=200 HTTP/1.1" 200 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:36  üîç FEEDBACK DEBUG: About to query feedback table
Dec 06 15:56:36  üîç FEEDBACK DEBUG: where clause: {}
Dec 06 15:56:36  10.244.26.130 - - [06/Dec/2025:15:56:36 +0000] "GET /api/feedback?limit=20 HTTP/1.1" 304 - "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/143.0.0.0 Safari/537.36"
Dec 06 15:56:39  10.244.4.175 - - [06/Dec/2025:15:56:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:56:49  10.244.4.175 - - [06/Dec/2025:15:56:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:56:49  10.244.9.47 - - [06/Dec/2025:15:56:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:56:59  10.244.4.175 - - [06/Dec/2025:15:56:59 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:56:59  10.244.9.47 - - [06/Dec/2025:15:56:59 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:57:09  10.244.4.175 - - [06/Dec/2025:15:57:09 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:57:09  10.244.9.47 - - [06/Dec/2025:15:57:09 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:57:19  10.244.4.175 - - [06/Dec/2025:15:57:19 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:57:19  10.244.9.47 - - [06/Dec/2025:15:57:19 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:57:29  10.244.4.175 - - [06/Dec/2025:15:57:29 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:57:29  10.244.9.47 - - [06/Dec/2025:15:57:29 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:57:39  10.244.4.175 - - [06/Dec/2025:15:57:39 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:57:39  10.244.9.47 - - [06/Dec/2025:15:57:39 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"
Dec 06 15:57:49  10.244.4.175 - - [06/Dec/2025:15:57:49 +0000] "GET /api/health HTTP/1.1" 200 379 "-" "kube-probe/1.31"
Dec 06 15:57:49  10.244.9.47 - - [06/Dec/2025:15:57:49 +0000] "GET /api/health HTTP/1.1" 200 378 "-" "kube-probe/1.31"